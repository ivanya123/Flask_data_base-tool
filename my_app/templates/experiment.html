{% extends 'base.html' %}

{% block tittle %}
<style>
    h1 {
        font-size: 24px;
    }
    h2 {
        font-size: 16px;
    }
    .materials-table {
        width: 100%; /* Ширина таблицы на 100% */
        border-collapse: collapse; /* Объединяем границы ячеек */
    }

    .materials-table th, .materials-table td {
        border: 1px solid #ccc; /* Границы ячеек и заголовков */
        padding: 8px; /* Отступы внутри ячеек */
    }

    .materials-table th {
        background-color: #f2f2f2; /* Цвет фона для заголовков */
    }
</style>
<div class="container-sm">
    <div class="row">
        <a class="btn btn-primary" type="submit" href="/experiment/add">Добавить эксперимент</a>
    </div>
    <h1> Таблица материалов </h1>
    <form method="get" action="{{ url_for('experiments_table') }}">
        <div class="input-group mb-3">
            <input class="form-control" type="text" name="material" placeholder="Фильтр по материалу" value="{{ request_args.get('material', '') }}">
            <input class="form-control" type="text" name="coating" placeholder="Фильтр по покрытию" value="{{ request_args.get('coating', '') }}">
            <input class="form-control" type="number" name="spindle_min" placeholder="Мин обороты шпинделя" value="{{ request_args.get('spindle_min', '') }}">
            <input class="form-control" type="number" name="spindle_max" placeholder="Макс обороты шпинделя" value="{{ request_args.get('spindle_max', '') }}">
            <input class="form-control" type="number" name="feed_min" placeholder="Мин подача" value="{{ request_args.get('feed_min', '') }}">
            <input class="form-control" type="number" name="feed_max" placeholder="Макс подача" value="{{ request_args.get('feed_max', '') }}">
            <button class = "btn btn-success" type="submit">Фильтровать</button>
        </div>
    </form>
    <table class="table table-primary table-striped-columns">
        <thead>
            <tr>
                <th>Обрабатываемый материал</th>
                <th>Инструмент</th>
                <th>Износостойкое покрытие</th>
                <th>Обороты шпинделя(n), об/мин</th>
                <th>Подача(s), мм/мин</th>
                <th>Пройденная длина обработки(L), мм</th>
                <th>Стойкость инструмента(T), мин</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            {% for i in experiment %}
            <tr>
                <td><a href="/material/{{i.material_id}}/info">{{ i.material.name }}</a></td>
                <td><a href="/tool/{{i.tool_id}}/info">{{ i.tool.name }}</a></td>
                <td>{{ i.coating.name }}</td>
                <td>{{ i.spindle_speed | int }}</td>
                <td>{{ i.feed_table | int }}</td>
                <td>{{ i.length_path | round(2)}}</td>
                <td>{{ i.durability | round(2)}}</td>
                <td>
                    <div class="btn-group btn-group-sm" role="group" aria-label="Basic outlined example">
                        <a href="/experiments/{{i.id}}/delete" class="btn btn-warning">Удалить</a>
                        <a href="/experiments/{{i.id}}/info" class="btn btn-success">Подробнее</a>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div id="dash-container" style="height: 100vh;">
            <iframe src="/dash_wear/" width="100%" height="100%" frameborder="0"></iframe>
    </div>
</div>
{% endblock %}

